{% load static %}
<html lang="en">


<!-- appointments23:19-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'staff/img/favicon.ico' %}">
    <title>Medlab Blood Bank</title>
   
    
    
    <link rel="stylesheet" type="text/css" href="{% static 'staff/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'staff/css/font-awesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'staff/css/select2.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'staff/css/style.css' %}">
	

    <style>
            
		.sidebar {
			box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
			top: 50px;
			width: 230px;
			z-index: 1039;
			
			background-color: #d4a5a5;
			bottom: 0;
			margin-top: 0px;
			position: fixed;
			left: 0;
			transition: all 0.2s ease-in-out;
		}
		.sidebar.opened {
			-webkit-transition: all 0.4s ease;
			-moz-transition: all 0.4s ease;
			transition: all 0.4s ease;
		}
		.sidebar-inner {
			height: 100%;
			transition: all 0.2s ease-in-out 0s;
		}
		.sidebar-menu ul {
			font-size: 14px;
			list-style-type: none;
			margin: 0;
			padding: 0;
		}
		.sidebar-menu li a {
			color: white;
			display: block;
			font-size: 13px;
			height: auto;
			padding: 0 20px;
		}
		.sidebar-menu li a:hover {
			color: #802020;
		}
		.sidebar-menu li.active a {
			color: #802020;
			background-color: #f3f3f3;
		}
		.menu-title {
			color: #333;
			font-size: 15px;
			font-weight: 500;
			padding: 12px 20px;
		}
		.menu-title > i {
			float: right;
			line-height: 40px;
		}
		.sidebar-menu li.menu-title a {
			color: #009efb;
			display: inline-block;
			float: right;
			padding: 0;
		}
		.sidebar-menu li.menu-title a.btn {
			color: #fff;
			display: block;
			float: none;
			font-size: 15px;
			line-height: inherit;
			margin-bottom: 15px;
		}
		.sidebar-menu ul ul a.active {
			color: #009efb;
			text-decoration: underline;
		}
		.table-responsive table {
			font-size: 11px; /* Adjust the font size as needed */
		}
	
		.table-responsive th,
		.table-responsive td {
			padding: 8px; /* Adjust the padding as needed */
		}
	</style>   

</head>

<body>
    <div class="main-wrapper">
        <div class="header">
			<div class="header-left">
				<a href="{% url 'staffindex' %}" class="logo">
					<img src="{% static 'staff/img/logo.png' %}" width="35" height="35" alt=""> <span>Medlab Blood Bank</span>
				</a>
			</div>
			<a id="toggle_btn" href="javascript:void(0);"><i class="fa fa-bars"></i></a>
            <a id="mobile_btn" class="mobile_btn float-left" href="#sidebar"><i class="fa fa-bars"></i></a>
            <ul class="nav user-menu float-right">
                <li class="nav-item dropdown d-none d-sm-block">
                    <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown"><i class="fa fa-bell-o"></i> <span class="badge badge-pill bg-danger float-right">3</span></a>
                    <div class="dropdown-menu notifications">
                        <div class="topnav-dropdown-header">
                            <span>Notifications</span>
                        </div>
                        <div class="drop-scroll">
                            <ul class="notification-list">
                                
                                <li class="notification-message">
                                    <a href="{% url 'activities' %}">
                                        <div class="media">
											<span class="avatar">L</span>
											<div class="media-body">
												<p class="noti-details"><span class="noti-title">Misty Tison</span> added <span class="noti-title">Domenic Houston</span> and <span class="noti-title">Claire Mapes</span> to project <span class="noti-title">Doctor available module</span></p>
												<p class="noti-time"><span class="notification-time">8 mins ago</span></p>
											</div>
                                        </div>
                                    </a>
                                </li>
                                
                                
                            </ul>
                        </div>
                        
                    </div>
                </li>
                <li class="nav-item dropdown d-none d-sm-block">
                    <a href="javascript:void(0);" id="open_msg_box" class="hasnotifications nav-link"><i class="fa fa-comment-o"></i> <span class="badge badge-pill bg-danger float-right">8</span></a>
                </li>
                <li class="nav-item dropdown has-arrow">
                    <a href="#" class="dropdown-toggle nav-link user-link" data-toggle="dropdown">
                        <span class="user-img"><img class="rounded-circle" src="{% static 'staff/img/user.jpg' %}" width="40" alt="staff">
							<span class="status online"></span></span>
                        <span>Staff</span>
                    </a>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="{% url 'profile1' %}">My Profile</a>
						<a class="dropdown-item" href="{% url 'editprofile' %}">Edit Profile</a>
						
						<a class="dropdown-item" href="{% url 'loggout' %}">Logout</a>
					</div>
                </li>
            </ul>
            <div class="dropdown mobile-user-menu float-right">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="{% url 'profile1' %}">My Profile</a>
					<a class="dropdown-item" href="{% url 'editprofile' %}">Edit Profile</a>
					
					<a class="dropdown-item" href="{% url 'loggout' %}">Logout</a>
                </div>
            </div>
        </div>
        <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul>
                        <li class="menu-title">Main</li>
                        <li>
                            <a href="{% url 'staffindex' %}"><i class="fa fa-dashboard"></i> <span>Dashboard</span></a>
                        </li>
						<li>
                            <a href="{% url 'doctors' %}"><i class="fa fa-users"></i> <span>Donors</span></a>
                        </li>
                        <li>
                            <a href="{% url 'registereddonortablestaff' %}"><i class="fa fa-registered"></i> <span>Registered Donors</span></a>
                        </li>
                        
                        
                        <li>
                            <a href="{% url 'departments' %}"><i class="fa fa-hospital-o"></i> <span>Blood Bank Camps</span></a>
                        </li>
                        <li class="active">
                            <a href="{% url 'donorappointments' %}"><i class="fa fa-list-alt"></i> <span>View Appointements</span></a>
                        </li>
						<li>
                            <a href="{% url 'requests' %}"><i class="fa fa-list-alt"></i> <span>View Requests</span></a>
                        </li>
						<li>
                            <a href="{% url 'bloodinventory' %}"><i class="fa fa-tint"></i> <span>Blood Inventory</span></a>
                        </li>
						<li class="submenu">
							<a href="#"><i class="fa fa-user"></i> <span>Staffs </span> <span class="menu-arrow"></span></a>
							<ul style="display: none;">
								<li><a href="{% url 'employees' %}">Staffs List</a></li>
							</ul>
						</li> 
                    </ul>
                </div>
            </div>
        </div>
        <div class="page-wrapper">
            <div class="content">
                <div class="row">
                    <div class="col-sm-4 col-3">
                        <h4 class="page-title">Appointments</h4>
                    </div>
                    
                </div>
				<div class="row">
					<div class="col-md-12">
						<div class="table-responsive">
							<table class="table table-striped custom-table">
								<thead>
									<tr>
										<th>Name</th>
										<th>Camp</th>
										<th>Camp Address</th>
										<th>District</th>
										<th>Organized By</th>
										<th>Date</th>
										<th>Time </th>
										<th>Status</th>
										
									</tr>
								</thead>
								<tbody>
									{% for appointment in appointments %}
										<tr>
											<td>
												{% if appointment.booked_by_donor %}
													{{ appointment.booked_by_donor.full_name }}
												{% else %}
													Not booked by any donor
												{% endif %}
											</td>
											<td>{{ appointment.camp.campName }}</td>
											<td>{{ appointment.camp.campAddress }}</td>
											<td>{{ appointment.camp.campDistrict }}</td>
											<td>{{ appointment.camp.organizedBy.full_name }}</td>
											<td>{{ appointment.camp.campDate }}</td>
											<td>{{ appointment.time_slot }}</td>
											<td>
												<div class="status-buttons" data-appointment-id="{{ appointment.id }}">
													<button class="status-btn donated-btn">Donated</button>
													<button class="status-btn not-donated-btn">Not Donated</button>
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
							
						</div>
					</div>
                </div>
            </div>   
			
		</div>
    </div>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var statusButtons = document.querySelectorAll('.status-buttons');
	
			statusButtons.forEach(function (buttonsContainer) {
				var donatedBtn = buttonsContainer.querySelector('.donated-btn');
				var notDonatedBtn = buttonsContainer.querySelector('.not-donated-btn');
				var statusTexts = buttonsContainer.querySelectorAll('.status-text');
	
				donatedBtn.addEventListener('click', function () {
					// Toggle visibility of status text and buttons
					statusTexts.forEach(function (statusText) {
						statusText.style.display = 'block';
					});
					donatedBtn.style.display = 'none';
					notDonatedBtn.style.display = 'none';
	
					// Optionally, redirect to another page for filling details
					var appointmentId = buttonsContainer.getAttribute('data-appointment-id');
					window.location.href = '/fill-details/' + appointmentId;
				});
	
				notDonatedBtn.addEventListener('click', function () {
					// Toggle visibility of status text and buttons
					statusTexts.forEach(function (statusText) {
						statusText.style.display = 'block';
					});
					donatedBtn.style.display = 'none';
					notDonatedBtn.style.display = 'none';
				});
			});
		});
	</script>
    <div class="sidebar-overlay" data-reff=""></div>
    <script src="{% static 'staff/js/jquery-3.2.1.min.js' %}"></script>
	<script src="{% static 'staff/js/popper.min.js' %}"></script>
    <script src="{% static 'staff/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'staff/js/jquery.slimscroll.js' %}"></script>
    <script src="{% static 'staff/js/select2.min.js' %}"></script>
    <script src="{% static 'staff/js/app.js' %}"></script>
</body>
</html>



